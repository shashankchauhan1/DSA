// java

class Solution {
    public boolean validateV4(String s){
        String[] str = s.split("\\.");
        if(str.length!=4) return false;

        for(int i=0; i<str.length; i++){
            String segment = str[i];
            if(segment.length()==0 || segment.length()>3) return false;
            for(int j=0; j<segment.length(); j++) if(!Character.isDigit(segment.charAt(j))) return false;
            if(segment.charAt(0)=='0' && segment.length()>1) return false;
            int num = Integer.parseInt(segment);
            if(num<0 || num>255) return false;
        }
        return true;
    }

    public boolean validateV6(String s){
        String[] str = s.split(":");
        if(str.length != 8) return false;

        Set<Character> set = new HashSet<>();
        for(char ch = 'a'; ch<='f'; ch++) set.add(ch);
        for(char ch = 'A'; ch<='F'; ch++) set.add(ch);

        for(int i=0; i<str.length; i++){
            String segment = str[i];
            if(segment.length()>4 || segment.length()==0) return false;

            for(int j=0; j<segment.length(); j++){
                char ch = segment.charAt(j);
                if(!Character.isDigit(ch) && !set.contains(ch)) return false;
            }
        }

        return true;
    }

    public String validIPAddress(String queryIP) {
        boolean ipV4 = false;
        int ipV4Count = 0;
        boolean ipV6 = false;
        int ipV6Count = 0;

        for(int i=0; i<queryIP.length(); i++){
            if(queryIP.charAt(i)=='.'){
                ipV4Count++;
            }
            else if(queryIP.charAt(i)==':'){
                ipV6Count++;
            }
        }

        if(ipV4Count==3) ipV4 = true;
        if(ipV4) return validateV4(queryIP) ? "IPv4" : "Neither";
        if(ipV6Count==7) ipV6 = true;
        if(ipV6) return validateV6(queryIP) ? "IPv6" : "Neither";

        return "Neither";
    }
}
